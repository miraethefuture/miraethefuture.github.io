---
title: My Boxes
author: Mirae
date: 2022-08-14
category: TIL
layout: post
<!--cover: /assets/images/team.gif-->
---

# 앱 프로젝트
  작은 개인 프로젝트를 시작했습니다.  
  목표는 9월 안에 1차 완성 후 테스트 플라이트에 등록하기!  
  하루하루 무엇을 했는지 기록을 남겨봅니다.  
    
    


## 9/15  
<center><video src="https://user-images.githubusercontent.com/85061148/190425324-cebc28eb-9cf7-45f9-a66a-96bb1ba0aef6.mov" controls="controls" style="max-width: 600px">
</video></center>  
  
  처음 앱을 만들기 시작한 날짜는 한달 전인 8월 14일입니다.   
  그동안 무엇을 했는지 영상으로 보면..        
    
  먼저 무엇을 만들고 싶었는지 이야기하면 좋을 것 같다. '내가 사용하고 싶은 앱을 한 번 만들어보자'라는 생각에서 시작했다. 내가 어떤 물건을 가지고 있는지 몰라서 이미 있는 물건을 또 사고 나중에 발견하거나, 집을 한바탕 뒤집어 엎은 후에야 필요한 물건을 찾는 일이 종종 있었다. 그러다보니 내가 어떤 물건들을 가지고 있는지를 목록으로 만들고 싶었다. 어디에 그 물건이 있는지를 알면 좋을 것 같았고 검색을 통해서 바로 찾을 수 있으면 좋을 것 같다는 생각을 했다. 그래서 만들기 시작한 것이 바로 이 앱이다. 아직 앱의 이름을 확정한 것은 아니지만 일단 MyBoxes 라는 프로젝트명을 지어보았다.  
  메인 리스트 뷰 / 각 상자 속 아이텝의 리스트 뷰 / 편집뷰를 만든 상태이다.  
  아직 편집 화면에서 추가한 아이템이나 변경 사항들이 리스트에 반영되는 곳까지 데이터 플로우를 처리하지 못했다. 일단 그것을 먼저해야 할 것 같다. 
  
## 9/19  
> 좀 더 정확하게 이해해보기
{: .block-tip }
    Edit 뷰를 만들기 전에 타입 Box 안에 nested 형태로 Data라는 타입을 생성했다. 
    - 타입 Data는 왜 필요했을까?  
    1) Data에는 Box의 속성 중, 편집 가능하도록 할 속성을 담는다. 
    2) 사용자가 편집한 내용을 Data의 각 속성에 담는다. 
    3) 변경사항이 저장되는게 확실해지면 ('확인' 또는 'Done' 버튼을 눌렀을 때...)
    4) Data에 담긴 내용을 Box에 업데이트한다.   
      
<!--  급 궁금 : 화면에 글자를 쓰는 것 만으로 메모리에 할당되는가? 저장을 해야 할당되는가?  -->
   
    - computed property인 data의 역할?
    a. data는 Box 타입의 extension { } 안에서 정의됨 
    b. data의 리턴 타입은 Data
    c. Box의 속성값들을 사용하여 Data() 를 리턴 
    
<!--  is data doing something on the edit view? something like...show the property value that I already have on the item list view?   -->

## 9/25

<center><video src="https://user-images.githubusercontent.com/85061148/192147063-40f9f830-3ce6-4b31-bca1-b9950092c6f6.mov" controls="controls" style="max-width: 600px">
</video></center>  
  
Done 버튼을 누르면 모달뷰가 내려가고, Box.Data()에 담아두었던 원래 입력되어 있던 데이터 + 변경된 데이터를 Box에 업데이트하여 아이템 리스트에서도 볼 수 있도록 함. 

## 9/28  
  
State 와 binding을 사용하여 데이터가 뷰 사이에서 전달되도록 했지만, 앱을 종료했다 다시 시작하면 모든 데이터가 날라간다. 데이터를 저장하고 가져오는 메서드를 작성해야 한다. 

## 9/30 

데이터를 file/Document에 저장하고 가져오는 함수를 따로 작성하고 앱이 열릴 때 데이터를 가져오는 함수 적용 중...

## 10/2 
  
<center><video src="https://user-images.githubusercontent.com/85061148/193455920-c93634a8-1fe1-468a-b779-29c0cd696d84.mov" controls="controls" style="max-width: 600px">
</video></center>

@Environment 속성에 scenePhase 값을 설정하여 앱이 inactive한 상태로 바뀔 때 사용자가 입력한 데이터를 저장하도록 함. 이제 앱을 종료하고 다시 열어도 그대로 데이터가 저장되어 있는 상태가 되었다.  
- 보관함 리스트를 삭제하는 기능 추가 완료
- 보관함에 pin 심볼을 다른 것으로 변경하기
- 기존에 임의로 설정해두었던 배경/글자색을 주석처리하여 기본색으로 설정
- 태그 심볼 제거  
  
### Testing..
  
<center><video src="https://user-images.githubusercontent.com/85061148/193462252-3c201255-58ca-4764-8887-1adca5ca0164.MP4" controls="controls" style="max-width: 300px">
</video></center>  

## 10/6
  
데이터가 잘 입력되는지 테스트 해봤는데 생각 못한 문제가 있었다. 한번에 많은 데이터를 입력면 목록이 키보드 뒤로 숨는다.. 흠.. 위 목록을 스크롤로 올릴 수 있어서 사용에는 문제가 없지만 좀 더 나은 사용자 경험을 위해서 후에 수정할 목록에 추가!  
  
기능을 좀 더 추가해야 할 것 같아서 목록에 별모양을 추가하는 중.. '좋아요' 버튼 같은 느낌으로!

## 10/8
  
  <center><img src="/assets/images/MyBoxes_20221008.png" alt="MyBoxes_20221008.png" width="700"></center><br>  
    
튜토리얼을 보고 리스트를 필터링하는 computed property를 바디 바깥 부분에 작성했는데 그럼 바인딩을 사용할 수 없어서 바디 안쪽으로 재작성했다. 

<center><video src="https://user-images.githubusercontent.com/85061148/194709563-3f4354c8-5f77-49dd-afb1-98ce5c300238.mov" controls="controls" style="max-width: 300px">
</video></center>  
  
'좋아요'(?) / Favorite 을 표시할 수 있는 기능을 추가해보고 있다. Favorite인지 아닌지 정보를 담을 Bool 타입 속성을 모델 스트럭처에 추가하고 그 속성의 값이 true일 때만 노란색 별이 나타나도록 해주었다. 샘플 데이터 값에 true/false를 입력하여 별이 잘 나타는지 확인했다. 토글을 만들어 On 상태일 때는 favorite 표시가 된 것만 나타나도록 했다. 

<!--위 바로 직전 부분 스터디 하기 (토글을 추가하고 토글이 On일때 true로 변환되는 @State 속성을 리스트를 필터링하는 클로저에...) 무슨 말인지 모르겠음.-->  
  
## 10/10  
  
바인딩을 사용하여 뷰 안에서 생긴 데이터의 변경사항을 데이터 소스로 전달할 수 있다.   
사용자가 입력한 카테고리를 기준으로 나누어 보관함들을 보여주는 뷰를 생성 중.  
샘플 데이터에 입력해 주었고, 사용자가 입력하는 부분을 생성해야 함.

## 10/11 
  
사용자가 입력한 카테고리를 기준으로 나누는 것은 일단 보류. 미리 생성해 둔 카테고리를 이용하여 보관함을 나눠보는 것을 먼저 시도해보려고 한다. 

## 10/12 
  
회사일의 연장..?으로 iOS 프로젝트가 하나 생겨서 잠시 이 프로젝트를 쉽니다.
  
## 10/13  
  
위 프로젝트를 안해도 돼서 (하루만에 ㅋㅋㅋㅋ) 다시 이 프로젝트로 돌아옵니다.

## 10/16 
  
카테고리 기능이 필요할 것 같지 않아서 검색 기능을 먼저 구현해보려고 한다.  
searchable 모더파이어를 사용해보려고 하는데.. 될까..? 

## 10/17
  
<center><img src="/assets/images/MyBoxes_20221017.png" alt="MyBoxes_20221017.png" width="300"></center><br>  
  
등록한 모든 아이템을 검색하는 기능을 구현하려고 찾아보니 크게 UIKit 을 사용하는 방법과 SwifUI를 사용하는 방법 두 가지가 있었다. 먼저 SwiftUI의 searchable 모더 파이어를 사용해보기로 했다. 검색 바를 구현하는건 코드 세 줄만 추가하면 되어서 금방했는데 그 후에 과정에서 시간이 좀 들고 있다. (Overlay를 사용해서 검색된 값들과 검색창만 화면에 보여주려고 하는데 Overlay를 어디다가 붙여야 할 지 모르겠음.) 내일까지 구현해보고 안되면 UIKit으로 해봐야겠다. 

## 10/18
  
<center><video src="https://user-images.githubusercontent.com/85061148/196460314-4cc2b2ea-3c89-48af-9718-758e2d3f89e6.mov" controls="controls" style="max-width: 600px">
</video></center>  
  
어제 searchable 을 사용하여 검색 텍스트 필드 UI를 생성했다. 사용자가 입력을 시작하면 현재 박스 목록 화면을 완전히 가리는 새로운 뷰가 나타나고, 그 뷰에 검색어가 들어간 아이템들이 쭉 나왔으면 좋겠다. 일단 영상에서 보이듯이 검색어를 입력했을 때 현재 목록위로 overlay가 된 투명한(?) 뷰에 입력한 값이 전달되는 것까지 구현하였다. 이제 그 화면에 검색 기능을 가진 리스트를 뽑아내면 될 것 같다. 

## 10/19  
  
전체 앱을 통하는 데이터 흐름을 변경했다. 전체 아이템 목록의 이름(itemName)을 기준으로 키워드와 일치하는 아이템 목록을 만들어서 뿌러주려고 했는데.. 오늘은 실패! 오류는 어떻게든 해결을 해봤는데 키워드를 입력하자 흰 화면이 나타난다... 놉 ㅠ .... 내일 다시 도전해보겠어....!

## 10/20
  
```swift
var filteredList: [Box.Item] {
    if !searchText.isEmpty{
        return items
    } else {
        return items.filter { $0.itemName.localizedCaseInsensitiveContains(searchText) }
    }
}
```  
localizedCaseInsensitiveContains(_\:) 메서드를 사용해서 대소문자에 상관없이 검색 키워드를 포함한 아이템들의 목록을 만드려고 했는데 처음에 자꾸 오류가 났다. 알고보니 searchText 자리에 값이 nil이면 안되는데 if !searchText.isEmpty처리를 해주지 않았던게 원인이었다. 비어있을 때는 키워드로 필터링되지 않은 전체 아이템이 나타나도록 if문을 작성해 주었다.


## 수정할 것
  
- 1번 보관함을 생성한 뒤 다시 새 보관함을 생성하면 1번 보관함에 정보가 추가 화면에 나타남. 나타나지 않도록 수정할 것 (현재 앱을 내렸다 올리면 1번 보관함의 정보가 나타나지 않음) 




  
  





