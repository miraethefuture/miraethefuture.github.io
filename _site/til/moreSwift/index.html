<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>심화 Swift | Mirae2thefuture</title>
<meta name="description" content="📂 Swift language guide 외의 정보들을 기록합니다.">


  <meta name="author" content="Mirae">
  
  <meta property="article:author" content="Mirae">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Mirae2thefuture">
<meta property="og:title" content="심화 Swift">
<meta property="og:url" content="http://localhost:4000/til/moreSwift/">


  <meta property="og:description" content="📂 Swift language guide 외의 정보들을 기록합니다.">







  <meta property="article:published_time" content="2022-05-27T00:00:00+09:00">





  

  


<link rel="canonical" href="http://localhost:4000/til/moreSwift/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Mirae 2 the Future",
      "url": "http://localhost:4000/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Mirae2thefuture Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->
<link rel="apple-touch-icon" sizes="152x152" href="/assets/images/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon-16x16.png">
<link rel="manifest" href="/assets/images/site.webmanifest">
<link rel="mask-icon" href="/assets/images/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
           
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/categories/">Categories</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/">Tags</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/" itemprop="item"><span itemprop="name">Home</span></a>

          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#til" itemprop="item"><span itemprop="name">Til</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">심화 Swift</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  


  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="심화 Swift">
    <meta itemprop="description" content="📂 Swift language guide 외의 정보들을 기록합니다.">
    <meta itemprop="datePublished" content="2022-05-27T00:00:00+09:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title p-name" itemprop="headline">
            <a href="http://localhost:4000/til/moreSwift/" class="u-url" itemprop="url">심화 Swift
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2022-05-27T00:00:00+09:00">May 27, 2022</time>
      </span>
    

    

    
  </p>


        </header>
      

      <section class="page__content e-content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-kiwi-bird"></i>  </h4></header>
              <ul class="toc__menu"><li><a href="#concurrency">Concurrency</a><ul><li><a href="#parallel-code">Parallel Code</a></li><li><a href="#defining-and-calling-asynchronous-functions">Defining and Calling Asynchronous Functions</a></li></ul></li><li><a href="#codable">Codable</a></li><li><a href="#completion-handler">Completion Handler</a></li><li><a href="#filter_">filter(_:)</a></li><li><a href="#makeuiviewcontext">makeUIView(context:)</a></li><li><a href="#strong-reference-cycle">Strong reference cycle</a><ul><li><a href="#weak-self-in-swift">[weak self] in Swift</a><ul><li><a href="#closures-and-strong-reference-cycles">Closures and Strong Reference Cycles</a></li></ul></li></ul></li></ul>

            </nav>
          </aside>
        
        <p><sub>📂 Swift language guide 외의 정보들을 기록합니다.</sub>
<br />
<br />
<br /></p>

<h1 id="concurrency">Concurrency</h1>
<h2 id="parallel-code">Parallel Code</h2>

<p>Swift는 구조화된 방식으로 비동기 및 병렬 코드를 작성할 수 있도록 돕는 내장 지원을 가지고 있습니다. (코드를 작성할 수 있는 방식 또는 키워드를 가지고 있는 거겠죠?)</p>

<p>Asynchronous code(비동기 코드)는 중단되었다가 다시 시작될 수 있습니다.</p>

<p>Parallel code(병렬 코드)는 여러개의 코드가 동시에 동작하는 것을 의미합니다. 예를 들어 4 코어 프로세서를 가진 컴퓨터는 네개의 코드를 동시에 실행할 수 있습니다. 각각의 코어는 하나의 일을 수행합니다. 병렬(parallel) 그리고 비동기(asynchronous)코드는 한번에 여러개의 작업을 수행합니다.<br />
  이것은 외부 시스템을 기다리고 있는 작업을 중지시킵니다.(?) 그리고 memory-safe한 방식으로 코드를 작성하기 쉽도록 만들어 줍니다.</p>

<p>아래 설명에서 concurrency라는 단어는 비동기적(asynchronous) 코드와 병렬(parallel)코드의 일반적인 콤비네이션을 나타내기 위해 사용됩니다.</p>

<p>Swift 언어의 지원 없이도 concurrent 코드를 작성할 수 있지만, 그렇게 작성된 코드들은 알아보기 어려운 경우가 많습니다.<br />
  예를 들면, 아래의 코드는 사진의 이름 목록을 다운로드 하고, 목록의 첫번째 사진을 다운로드 합니다. 그리고 그 사진을 사용자에게 보여줍니다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nf">listPhotos</span><span class="p">(</span><span class="nv">inGallery</span><span class="p">:</span> <span class="s">"Summer Vacation"</span><span class="p">)</span> <span class="p">{</span> <span class="kt">PhotoNames</span> <span class="k">in</span>
      <span class="k">let</span> <span class="nv">sortedNames</span> <span class="o">=</span> <span class="n">photoNames</span><span class="o">.</span><span class="nf">sorted</span><span class="p">()</span>
      <span class="k">let</span> <span class="nv">name</span> <span class="o">=</span> <span class="n">sortedNames</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
      <span class="nf">downloadPhoto</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="n">name</span><span class="p">)</span> <span class="p">{</span> <span class="n">photo</span> <span class="k">in</span>
          <span class="nf">show</span><span class="p">(</span><span class="n">photo</span><span class="p">)</span>
      <span class="p">}</span>  
  <span class="p">}</span>
</code></pre></div></div>

<p>이렇게 간단한 경우에도, 여러개의 completion handler로 코드가 작성되어야 했기 때문에 결국 nested 클로저를 작성하게 됩니다.<br />
  이런 방식으로는, nesting이 더 깊어짐과 함께 코드가 복잡해지고 다루기 어려워집니다.</p>

<h2 id="defining-and-calling-asynchronous-functions">Defining and Calling Asynchronous Functions</h2>

<p>비동기 함수(asynchronous function) 또는 비동기 메서드(asynchronous method)는 실행되는 중간에 중단될 수 있는 특별한 종류의 함수 또는 메서드입니다. 실행을 끝까지 완료하고 에러를 던지거나 리턴하지 않는 기존의 방식인 동기 함수, 동기 메서드(synchronous function, synchronous method)와는 대조적입니다. 비동기 함수나 메서드도 위의 세가지 과정 중 하나를 수행하지만 중간에 잠시 어떤 것을 기다리며 멈출 수  있습니다. 비동기 함수 또는 메서드의 바디 안 어디에서 실행을 중단 시킬지 표시할 수 있습니다.</p>

<p>Function이나 메서드가 비동기적이라는 것을 나타내기 위해서, 선언 부분의 패러미터 뒤쪽에 async 키워드를 작성해줍니다. throws키워드를 이용해서 throwing function을 작성하는 것과 비슷합니다. 리턴값이 있을 때는 리턴 화살표 전에 async 키워드를 작성합니다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">func</span> <span class="nf">listPhotos</span><span class="p">(</span><span class="n">inGallery</span> <span class="nv">name</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="k">async</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">String</span><span class="p">]</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="c1">// ...비동기적 네트워킹 코드...</span>
    <span class="k">return</span> <span class="n">result</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>비동기적 함수이면서 에러를 던지는 함수를 작성할 때는 async throws 순으로 키워드를 작성합니다.</p>

<p>비동기적 메서드를 호출할 때, 해당 메서드가 리턴할 때까지 실행이 중단됩니다. 실행이 중단될 가능성이 있는 호출 앞에 await 키워드를 사용하여 표시해줍니다. 이것은 에러를 던지는 함수를 호출할 때 try 키워드를 작성하는 것과 비슷합니다. try 키워드는 프로그램에 에러가 있다면 실행 흐름이 변경될 수 있다는 것을 알려줍니다.</p>

<p><br /></p>

<h1 id="codable">Codable</h1>

<p>Codable은 Encodable 프로토콜과 Decodable프로토콜을 합친 type alias입니다.<br />
  이 프로토콜을 사용하면 JSON 파일로부터 데이터를 가져와 순서대로 출력하거나, 반대로 JSON 파일로 데이터를
  순서대로 출력시킬 수 있는 Codable API를 사용할 수 있습니다.</p>

<p><br /></p>

<h1 id="completion-handler">Completion Handler</h1>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Completion handler는 어떤 task가 완료된 후에 호출되는 callback function이다.  
Callback function은 어떤 function의 인자(argument)로 통과된 function을 말한다.
</code></pre></div></div>

<p><br /></p>

<h1 id="filter_">filter(_:)</h1>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">let</span> <span class="nv">cast</span> <span class="o">=</span> <span class="p">[</span><span class="s">"Vivien"</span><span class="p">,</span> <span class="s">"Marlon"</span><span class="p">,</span> <span class="s">"Kim"</span><span class="p">,</span> <span class="s">"Karl"</span><span class="p">]</span>
  <span class="k">let</span> <span class="nv">shortNames</span> <span class="o">=</span> <span class="n">cast</span><span class="o">.</span><span class="n">filter</span> <span class="p">{</span> <span class="nv">$0</span><span class="o">.</span><span class="n">count</span> <span class="o">&lt;</span> <span class="mi">5</span> <span class="p">}</span>
  <span class="nf">print</span><span class="p">(</span><span class="n">shortNames</span><span class="p">)</span>
  <span class="c1">// Prints ["Kim", "Karl"]</span>
</code></pre></div></div>

<p>cast라는 배열이 있습니다. filter 메서드를 사용하여 기존 배열에서 글자수가 다섯자 이하인 단어만으로 새로운 배열을 생성합니다. 새롭게 생성된 배열은 shortNames 상수에 할당해줍니다. $0이 cast의 요소라는 것을 알 수 있습니다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">var</span> <span class="nv">filteredLandmarks</span><span class="p">:</span> <span class="p">[</span><span class="kt">Landmark</span><span class="p">]</span> <span class="p">{</span>
  <span class="c1">//        landmarks.filter { landmark in</span>
  <span class="c1">//            (!showFavoritesOnly || landmark.isFavorite)</span>
  <span class="c1">//        }</span>
      <span class="n">landmarks</span><span class="o">.</span><span class="n">filter</span> <span class="p">{</span> <span class="nv">$0</span><span class="o">.</span><span class="n">isFavorite</span> <span class="o">==</span> <span class="kc">true</span> <span class="p">}</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>주석처리 한 부분이 원래 튜토리얼의 filter 메서드 코드이고, 주석처리 되지 않은 코드는 위의 예시를 보고 같은 방식으로 만들어 보았습니다. 똑같이 작동하는 것을 알 수 있었습니다. (!showFavoritesOnly 부분은 아직 코드의 영향을 미치지 않음.)</p>

<h1 id="makeuiviewcontext">makeUIView(context:)</h1>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">func</span> <span class="nf">makeUIView</span><span class="p">(</span><span class="nv">context</span><span class="p">:</span> <span class="k">Self</span><span class="o">.</span><span class="kt">Context</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span><span class="o">.</span><span class="kt">UIViewType</span>
</code></pre></div></div>
<p>View 객체를 생성하고 초기 상태를 설정합니다. 제공한 정보로 설정된 UIKit 뷰를 리턴합니다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">struct</span> <span class="nv">myView</span><span class="p">:</span> <span class="kt">UIViewRepresentable</span> <span class="p">{</span>
      <span class="kd">func</span> <span class="nf">makeUIView</span><span class="p">(</span><span class="nv">context</span><span class="p">:</span> <span class="kt">Context</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">ARView</span> <span class="p">{</span>
          <span class="k">let</span> <span class="nv">view</span> <span class="o">=</span> <span class="kt">ARView</span><span class="p">()</span>
          <span class="k">return</span> <span class="n">view</span>
      <span class="p">}</span>

      <span class="kd">func</span> <span class="nf">updateUIView</span><span class="p">(</span><span class="n">_</span> <span class="nv">uiView</span><span class="p">:</span> <span class="kt">ARView</span><span class="p">,</span> <span class="nv">context</span><span class="p">:</span> <span class="kt">Context</span><span class="p">)</span> <span class="p">{</span>
      <span class="p">}</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>패러미터인 context에는 현재 시스템의 상태에 대한 정보를 담고 있는 structure가 통과됩니다. 위의 예시의 Context는 UIViewRepresentableContext<Self>의 typealias입니다.</Self></p>

<p>뷰 객체를 생성하기 위해 이 메서드를 생성하고 사용합니다.</p>

<h1 id="strong-reference-cycle">Strong reference cycle</h1>

<p>두 객체가 서로를 참조하는 strong reference cycle (retain cycle이라고도 함.) 같은 경우에는 서로를 항상 참조하기 때문에 reference count 가 항상 1이 됩니다. reference count가 0이 되면 ARC가 해당 객체가 차지하던 메모리를 풀어주는데 strong reference cycle의 경우에는 reference count가 0이 되지 않기 때문에 해당 객체의 인스턴스 값이 nil이 되더라도 메모리를 차지하고 있는 현상이 발생하게 됩니다. 이런 문제를 해결하기 위해 weak reference를 사용합니다.</p>

<p><strong>weak reference</strong>는 reference count를 증가시키지 않는 reference 타입입니다. 그렇기 때문에 ARC가 참조된 객체가 사용하는 메모리를 언제든 풀어줄 수 있게 됩니다.</p>

<p>아래의 Pet / Owner 객체는 strong reference cycle을 생성합니다. Pet은 Owner를 참조하고 Owner는 Pet을 참조합니다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">class</span> <span class="kt">Pet</span> <span class="p">{</span>
      <span class="k">let</span> <span class="nv">name</span><span class="p">:</span> <span class="kt">String</span>
      <span class="k">var</span> <span class="nv">owner</span><span class="p">:</span> <span class="kt">Owner</span><span class="p">?</span>

      <span class="nf">init</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="p">{</span> <span class="k">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span> <span class="p">}</span>

      <span class="kd">deinit</span> <span class="p">{</span>
          <span class="nf">print</span><span class="p">(</span><span class="s">"Pet deallocated"</span><span class="p">)</span>
        <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">class</span> <span class="kt">Owner</span> <span class="p">{</span>
      <span class="k">var</span> <span class="nv">name</span><span class="p">:</span> <span class="kt">String</span>
      <span class="k">var</span> <span class="nv">per</span><span class="p">:</span> <span class="kt">Pet</span><span class="p">?</span>

      <span class="nf">init</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="p">{</span> <span class="k">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span> <span class="p">}</span>

      <span class="kd">deinit</span> <span class="p">{</span>
          <span class="nf">print</span><span class="p">(</span><span class="s">"Owner deallocated"</span><span class="p">)</span>
      <span class="p">}</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>이 strong reference cycle을 끊으려면 weak 키워드를 사용하여 weak reference로 만들면 됩니다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">class</span> <span class="kt">Pet</span> <span class="p">{</span>
      <span class="k">let</span> <span class="nv">name</span><span class="p">:</span> <span class="kt">String</span>
      <span class="k">weak</span> <span class="k">var</span> <span class="nv">owner</span><span class="p">:</span> <span class="kt">Owner</span><span class="p">?</span>

      <span class="nf">init</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="p">{</span> <span class="k">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span> <span class="p">}</span>

      <span class="kd">deinit</span> <span class="p">{</span>
          <span class="nf">print</span><span class="p">(</span><span class="s">"Pet deallocated"</span><span class="p">)</span>
        <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">class</span> <span class="kt">Owner</span> <span class="p">{</span>
      <span class="k">var</span> <span class="nv">name</span><span class="p">:</span> <span class="kt">String</span>
      <span class="k">var</span> <span class="nv">per</span><span class="p">:</span> <span class="kt">Pet</span><span class="p">?</span>

      <span class="nf">init</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="p">{</span> <span class="k">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span> <span class="p">}</span>

      <span class="kd">deinit</span> <span class="p">{</span>
          <span class="nf">print</span><span class="p">(</span><span class="s">"Owner deallocated"</span><span class="p">)</span>
      <span class="p">}</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>Pet 클래스의 owner 변수 앞에 weak 키워드를 작성해 주었습니다.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">var</span> <span class="nv">pet</span><span class="p">:</span> <span class="kt">Pet</span><span class="p">?</span> <span class="o">=</span> <span class="kt">Pet</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"Dog"</span><span class="p">)</span>
  <span class="k">var</span> <span class="nv">owner</span><span class="p">:</span> <span class="kt">Owner</span><span class="p">?</span> <span class="o">=</span> <span class="kt">Owner</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"Alice"</span><span class="p">)</span>

  <span class="n">pet</span><span class="o">!.</span><span class="n">owner</span> <span class="o">=</span> <span class="kt">Owner</span>
  <span class="n">owner</span><span class="o">!.</span><span class="n">pet</span> <span class="o">=</span> <span class="n">pet</span>

  <span class="n">pet</span> <span class="o">=</span> <span class="kc">nil</span>
  <span class="n">owner</span> <span class="o">=</span> <span class="kc">nil</span>

  <span class="c1">// Prints</span>
  <span class="s">"Owner deallocated
  Pet deallocated"</span>
</code></pre></div></div>

<p>출력된 결과를 보면 deinit() 메서드가 정상적으로 작동한 것을 알 수 있습니다. 이것은 ARC가 이 객체들로부터 사용되던 메모리를 성공적으로 해제시켰다는 것을 의미합니다. 이것은..</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">pet</span><span class="o">!.</span><span class="n">owner</span> <span class="o">=</span> <span class="n">owner</span>
  <span class="n">owner</span><span class="o">!.</span><span class="n">pet</span> <span class="o">=</span> <span class="n">pet</span>
</code></pre></div></div>
<p>pet.owner가 weak reference여서 owner의 reference count를 증가시키지 않아 strong reference cycle을 만들어내지 않았기 때문입니다.</p>

<p><!-- **여기까지 배운 것**   --></p>

<h2 id="weak-self-in-swift">[weak self] in Swift</h2>

<p>Swift에서 [weak self]는 클로저가 발생시킬 수 있는 메모리 손실을 방지하는 역할을 합니다. [weak self]를 사용하면 컴파일러는 자기 자신에게 weak reference를 생성합니다. 필요할 때 ARC가 스스로를 메모리로부터 해제시킬 수 있게 됩니다.</p>

<h3 id="closures-and-strong-reference-cycles">Closures and Strong Reference Cycles</h3>

<p>클로저 안에 언급된 것은 어떤 것이든 해당 클로저와 strong reference가 생성됩니다.</p>

<p>만약 클래스 안에 self를 사용하는 클로저가 있다면, 그 클로저가 메모리에 할당되어 있는 한 self와 strong reference를 가진 상태를 유지할 것입니다.</p>

<p>👷</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#learning" class="page__taxonomy-item p-category" rel="tag">learning</a><span class="sep">, </span>
    
      <a href="/tags/#swift" class="page__taxonomy-item p-category" rel="tag">Swift</a><span class="sep">, </span>
    
      <a href="/tags/#%EA%B3%B5%EB%B6%80-%EA%B8%B0%EB%A1%9D" class="page__taxonomy-item p-category" rel="tag">공부 기록</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/#til" class="page__taxonomy-item p-category" rel="tag">TIL</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2022-05-27T00:00:00+09:00">May 27, 2022</time></p>

      </footer>

      

      
  <nav class="pagination">
    
      <a href="/til/teamProject/" class="pagination--pager" title="앱 만들어보기(Collection view 사용해보기)
">Previous</a>
    
    
      <a href="/til/keepGoingwithApps/" class="pagination--pager" title="Keep Going with Apps
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h2 class="page__related-title">You may also enjoy</h2>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/teaser.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/til/sceneKit/" rel="permalink">SceneKit 3D Programming for iOS: Getting Started
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2022-06-18T00:00:00+09:00">June 18, 2022</time>
      </span>
    

    

    
  </p>


    <p class="archive__item-excerpt" itemprop="description">SceneKit 3D Programming for iOS: Getting Started
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/teaser.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/til/asyncAwait/" rel="permalink">async/await in Swift
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2022-06-14T00:00:00+09:00">June 14, 2022</time>
      </span>
    

    

    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Functions: 동기 / 비동기
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/teaser.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/til/keepGoingwithApps/" rel="permalink">Keep Going with Apps
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2022-06-07T00:00:00+09:00">June 7, 2022</time>
      </span>
    

    

    
  </p>


    <p class="archive__item-excerpt" itemprop="description">아래 모든 정보의 출처는 Apple Playgrounds이며 개인의 학습 용도로만 사용되었음을 밝힙니다.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/teamProject2.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/til/teamProject/" rel="permalink">앱 만들어보기(Collection view 사용해보기)
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2022-05-06T00:00:00+09:00">May 6, 2022</time>
      </span>
    

    

    
  </p>


    <p class="archive__item-excerpt" itemprop="description">📲 튜토리얼을 따라가며 다른 스타일로 앱 만들어보기.
</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Mirae 2 the Future. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
